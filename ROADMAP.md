# AI Human Chat Service - 개발 로드맵

> 사진을 업로드하면 AI 휴먼을 생성하고, 해당 휴먼과 대화할 수 있는 서비스

---

## 서비스 개요

사용자가 특정 인물 사진을 업로드하면, 해당 외모를 기반으로 AI 휴먼 캐릭터를 생성합니다.
생성된 AI 휴먼은 고유한 성격·말투·배경 스토리를 가지며, 사용자와 실시간 채팅이 가능합니다.

---

## 기술 스택 (권장)

| 영역 | 기술 | 선정 이유 |
|------|------|-----------|
| **Frontend** | Next.js 14+ (App Router) | SSR/SSG, 이미지 최적화, API Routes 통합 |
| **UI** | Tailwind CSS + shadcn/ui | 빠른 프로토타이핑, 채팅 UI 구현 용이 |
| **Backend API** | Next.js API Routes / FastAPI | Next.js 단일 배포 또는 Python AI 파이프라인 분리 |
| **Database** | PostgreSQL + Prisma ORM | 관계형 데이터 (유저-휴먼-대화) 관리 |
| **파일 스토리지** | AWS S3 / Cloudflare R2 | 업로드 이미지 및 생성 이미지 저장 |
| **AI 대화** | OpenAI GPT-4o / Claude API | 캐릭터 기반 대화 생성 |
| **이미지 분석** | OpenAI Vision / Claude Vision | 업로드 사진 분석 → 캐릭터 특성 추출 |
| **이미지 생성** | DALL-E 3 / Stable Diffusion | AI 휴먼 프로필 이미지 생성 (선택) |
| **인증** | NextAuth.js / Clerk | 소셜 로그인, 세션 관리 |
| **배포** | Vercel + AWS | 프론트엔드 + AI 백엔드 분리 배포 |

---

## Phase 1: 프로젝트 기반 구축

**목표**: 개발 환경 세팅 및 기본 프로젝트 골격 완성

### 1.1 프로젝트 초기화
- [ ] Next.js 프로젝트 생성 (TypeScript, App Router)
- [ ] Tailwind CSS + shadcn/ui 설정
- [ ] ESLint, Prettier 설정
- [ ] 프로젝트 디렉토리 구조 설계

### 1.2 데이터베이스 설계
- [ ] PostgreSQL 로컬 환경 구성
- [ ] Prisma 스키마 설계
  - `User` : 사용자 정보
  - `AiHuman` : AI 휴먼 프로필 (이름, 성격, 배경, 이미지 URL 등)
  - `Conversation` : 대화 세션
  - `Message` : 개별 메시지 (sender, content, timestamp)
- [ ] 마이그레이션 및 시드 데이터

### 1.3 인증 시스템
- [ ] NextAuth.js 설정 (Google/Kakao 소셜 로그인)
- [ ] 로그인/회원가입 페이지
- [ ] 세션 관리 및 보호된 라우트

```
예상 DB 스키마:

User (1) ──── (N) AiHuman
                    │
                    (1)
                    │
              Conversation (1) ──── (N) Message
```

---

## Phase 2: 이미지 업로드 & AI 휴먼 생성

**목표**: 사진 업로드 → AI 분석 → AI 휴먼 캐릭터 자동 생성

### 2.1 이미지 업로드 기능
- [ ] 드래그 앤 드롭 이미지 업로드 UI
- [ ] 이미지 유효성 검사 (파일 형식, 크기, 얼굴 감지)
- [ ] S3/R2 업로드 API 구현
- [ ] 이미지 리사이징 및 최적화

### 2.2 AI 이미지 분석
- [ ] Vision API 연동 (업로드된 사진 분석)
- [ ] 분석 결과에서 캐릭터 특성 추출
  - 외형 묘사 (성별, 연령대, 인상 등)
  - 분위기/느낌 기반 성격 추론
  - 어울리는 직업/취미/배경 스토리 생성
- [ ] 분석 결과 프리뷰 UI

### 2.3 AI 휴먼 프로필 생성
- [ ] 분석 결과 기반 캐릭터 프로필 자동 생성
  - 이름, 나이, 직업
  - MBTI / 성격 유형
  - 말투 스타일 (존댓말/반말, 이모티콘 사용 여부 등)
  - 관심사, 취미
  - 배경 스토리
- [ ] 사용자가 프로필을 수정/확정하는 편집 UI
- [ ] 확정된 프로필 DB 저장

### 2.4 AI 휴먼 프로필 이미지 (선택)
- [ ] 업로드 사진 스타일 변환 (예: 일러스트/아바타화)
- [ ] 또는 원본 사진 그대로 프로필에 사용

---

## Phase 3: 채팅 시스템 구현

**목표**: AI 휴먼과 자연스러운 대화가 가능한 채팅 인터페이스

### 3.1 채팅 UI
- [ ] 1:1 채팅 인터페이스 (메신저 스타일)
- [ ] AI 휴먼 프로필 표시 (이미지, 이름, 상태)
- [ ] 메시지 입력, 전송, 스크롤
- [ ] 타이핑 인디케이터 (AI 응답 대기 중)
- [ ] 메시지 시간 표시

### 3.2 AI 대화 엔진
- [ ] 시스템 프롬프트 설계
  - AI 휴먼의 성격, 말투, 배경을 반영하는 프롬프트 템플릿
  - 대화 맥락 유지를 위한 컨텍스트 윈도우 관리
- [ ] LLM API 연동 (GPT-4o / Claude)
- [ ] 스트리밍 응답 구현 (SSE / WebSocket)
- [ ] 대화 히스토리 저장 및 불러오기

### 3.3 대화 품질 향상
- [ ] 캐릭터 일관성 유지 로직
- [ ] 감정 표현 (이모지, 리액션)
- [ ] 대화 주제 전환 자연스럽게 처리
- [ ] 부적절한 콘텐츠 필터링

---

## Phase 4: 핵심 기능 고도화

**목표**: 서비스 완성도를 높이는 부가 기능

### 4.1 AI 휴먼 관리
- [ ] 내 AI 휴먼 목록 (대시보드)
- [ ] AI 휴먼 프로필 수정
- [ ] AI 휴먼 삭제
- [ ] AI 휴먼 즐겨찾기 / 정렬

### 4.2 대화 관리
- [ ] 대화 내역 검색
- [ ] 대화 세션 목록
- [ ] 대화 내보내기 (텍스트)
- [ ] 대화 삭제

### 4.3 알림 및 인터랙션
- [ ] AI 휴먼이 먼저 말 거는 기능 (푸시 알림)
- [ ] 기분/상태에 따른 AI 반응 변화
- [ ] 특별 이벤트 대화 (생일, 기념일 등)

---

## Phase 5: 배포 및 운영

**목표**: 프로덕션 배포 및 안정적 운영

### 5.1 인프라
- [ ] Vercel 배포 (프론트엔드)
- [ ] AI 백엔드 배포 (AWS Lambda / ECS)
- [ ] 데이터베이스 프로덕션 환경 (Supabase / AWS RDS)
- [ ] CDN 설정 (이미지 캐싱)

### 5.2 모니터링 & 운영
- [ ] 에러 트래킹 (Sentry)
- [ ] API 사용량 모니터링 (AI API 비용 관리)
- [ ] 로깅 시스템
- [ ] 성능 모니터링

### 5.3 보안
- [ ] API Rate Limiting
- [ ] 이미지 업로드 악성 파일 검사
- [ ] 개인정보 처리 방침
- [ ] 콘텐츠 모더레이션

---

## Phase 6: 확장 (향후)

### 6.1 소셜 기능
- [ ] AI 휴먼 공유 (공개 프로필)
- [ ] 다른 사용자의 AI 휴먼과 대화
- [ ] AI 휴먼 커뮤니티

### 6.2 고급 기능
- [ ] 음성 대화 (TTS + STT)
- [ ] 영상 통화 UI (AI 아바타 립싱크)
- [ ] AI 휴먼 간 대화 (멀티 에이전트)
- [ ] 그룹 채팅

### 6.3 수익화
- [ ] 프리미엄 플랜 (AI 휴먼 생성 수 제한)
- [ ] 프리미엄 캐릭터 템플릿
- [ ] API 사용량 기반 과금

---

## 디렉토리 구조 (권장)

```
ai-human/
├── src/
│   ├── app/                    # Next.js App Router
│   │   ├── (auth)/             # 인증 관련 페이지
│   │   │   ├── login/
│   │   │   └── register/
│   │   ├── (main)/             # 메인 서비스 페이지
│   │   │   ├── dashboard/      # AI 휴먼 목록
│   │   │   ├── create/         # AI 휴먼 생성
│   │   │   └── chat/[id]/      # 채팅 화면
│   │   ├── api/                # API Routes
│   │   │   ├── auth/
│   │   │   ├── ai-human/
│   │   │   ├── chat/
│   │   │   └── upload/
│   │   ├── layout.tsx
│   │   └── page.tsx
│   ├── components/
│   │   ├── ui/                 # shadcn/ui 컴포넌트
│   │   ├── chat/               # 채팅 관련 컴포넌트
│   │   ├── ai-human/           # AI 휴먼 관련 컴포넌트
│   │   └── common/             # 공통 컴포넌트
│   ├── lib/
│   │   ├── ai/                 # AI 관련 유틸 (프롬프트, API 호출)
│   │   ├── db/                 # Prisma 클라이언트
│   │   ├── storage/            # S3/R2 파일 업로드
│   │   └── utils/              # 공통 유틸리티
│   ├── hooks/                  # Custom React Hooks
│   └── types/                  # TypeScript 타입 정의
├── prisma/
│   ├── schema.prisma
│   └── seed.ts
├── public/
├── .env.local
├── next.config.js
├── tailwind.config.ts
├── tsconfig.json
└── package.json
```

---

## 우선순위 요약

| 순서 | Phase | 핵심 산출물 |
|------|-------|-------------|
| 1 | 기반 구축 | 프로젝트 세팅, DB, 인증 |
| 2 | 이미지 → AI 휴먼 | 업로드, 분석, 캐릭터 생성 |
| 3 | 채팅 시스템 | 대화 UI, AI 엔진, 히스토리 |
| 4 | 고도화 | 관리 기능, 알림, UX 개선 |
| 5 | 배포/운영 | 인프라, 모니터링, 보안 |
| 6 | 확장 | 소셜, 음성, 수익화 |
